<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DocScan â€” Recherche instantanÃ©e</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.4/dist/tesseract.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=DM+Mono:wght@400;500&display=swap');
    :root {
      --bg: #071a1e; --surface: #0d2a30; --border: #1a4a52;
      --accent: #2dd4bf; --accent2: #0891b2; --text: #e0f4f5;
      --muted: #4d8a92; --success: #34d1a0; --error: #ef4444;
      --r: 4px;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: var(--bg);
      background-image: radial-gradient(ellipse at 20% 0%, #0d3a42 0%, transparent 60%), radial-gradient(ellipse at 80% 100%, #062830 0%, transparent 50%);
      color: var(--text); font-family: 'DM Mono', monospace;
      min-height: 100vh; display: flex; flex-direction: column;
    }
    header {
      padding: 1.2rem 2rem; border-bottom: 1px solid var(--border);
      display: flex; align-items: center; gap: 1.2rem; flex-wrap: wrap;
    }
    .logo { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.7rem; letter-spacing: -0.03em; color: var(--accent); }
    .logo span { color: var(--accent2); }
    .tagline { font-size: 0.65rem; color: var(--muted); letter-spacing: 0.1em; text-transform: uppercase; }
    .badge { margin-left: auto; font-size: 0.6rem; letter-spacing: 0.08em; text-transform: uppercase; color: var(--success); border: 1px solid var(--success); padding: 0.25rem 0.6rem; border-radius: 2px; }

    main { flex: 1; display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto 1fr; }

    /* SEARCH */
    .search-row {
      grid-column: 1/-1; padding: 1rem 2rem;
      border-bottom: 1px solid var(--border); display: flex; gap: 1rem; align-items: center;
    }
    .search-wrap { flex: 1; position: relative; }
    .search-wrap::before { content: '>'; position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--accent); pointer-events: none; }
    #q {
      width: 100%; background: var(--surface); border: 1px solid var(--border);
      color: var(--text); font-family: inherit; font-size: 1rem;
      padding: 0.8rem 1rem 0.8rem 2.4rem; border-radius: var(--r); outline: none; transition: border-color 0.2s;
    }
    #q:focus { border-color: var(--accent); }
    #q::placeholder { color: var(--muted); }
    #stats { font-size: 0.65rem; color: var(--muted); white-space: nowrap; }
    #stats b { color: var(--accent); }

    /* LEFT */
    .left { border-right: 1px solid var(--border); padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; overflow-y: auto; }

    #drop {
      border: 2px dashed var(--border); border-radius: var(--r);
      padding: 2.5rem 1.5rem; text-align: center; cursor: pointer;
      position: relative; flex-shrink: 0; transition: border-color 0.2s, background 0.2s;
    }
    #drop.over { border-color: var(--accent); background: rgba(45,212,191,0.04); }
    #drop input { position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }
    #drop .icon { font-size: 2rem; margin-bottom: 0.5rem; }
    #drop .lbl { font-size: 0.75rem; color: var(--muted); line-height: 1.6; }
    #drop .lbl strong { color: var(--accent); }
    #drop .fmt { margin-top: 0.35rem; font-size: 0.58rem; color: #1a5a65; letter-spacing: 0.08em; text-transform: uppercase; }

    .sec-title { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); }
    #filelist { display: flex; flex-direction: column; gap: 0.4rem; }
    .fitem {
      display: flex; align-items: center; gap: 0.6rem; padding: 0.55rem 0.8rem;
      background: var(--surface); border: 1px solid var(--border); border-radius: var(--r); transition: border-color 0.3s;
    }
    .fitem.loading { border-color: var(--border); }
    .fitem.ready   { border-color: var(--success); }
    .fitem.error   { border-color: var(--error); }
    .fext { font-size: 0.55rem; font-weight: 600; text-transform: uppercase; padding: 0.15rem 0.35rem; border-radius: 2px; background: #091e24; color: var(--muted); flex-shrink: 0; min-width: 2.2rem; text-align: center; }
    .fname { flex: 1; font-size: 0.72rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .fst { font-size: 0.6rem; flex-shrink: 0; }
    .fst.loading { color: var(--muted); }
    .fst.ready   { color: var(--success); }
    .fst.error   { color: var(--error); }
    .fdel { background: none; border: none; color: #1a5560; cursor: pointer; font-size: 0.8rem; flex-shrink: 0; transition: color 0.2s; }
    .fdel:hover { color: var(--error); }

    /* progress bar */
    .fprog { padding: 0 0.8rem 0.45rem; }
    .fprog-bar { height: 2px; background: var(--border); border-radius: 1px; overflow: hidden; }
    .fprog-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.25s; }
    .fprog-lbl { font-size: 0.55rem; color: var(--muted); margin-top: 0.15rem; }

    /* RIGHT */
    .right { padding: 1.5rem; overflow-y: auto; display: flex; flex-direction: column; gap: 0.8rem; }
    #results { display: flex; flex-direction: column; gap: 0.6rem; }

    .rcard { background: var(--surface); border: 1px solid var(--border); border-radius: var(--r); overflow: hidden; animation: fi .15s ease; }
    @keyframes fi { from { opacity:0; transform:translateY(3px); } to { opacity:1; } }
    .rcard.hit { border-color: var(--accent); }
    .rhead { display: flex; align-items: center; gap: 0.6rem; padding: 0.6rem 0.85rem; border-bottom: 1px solid var(--border); }
    .rname { flex: 1; font-size: 0.78rem; font-weight: 500; }
    .rcnt { font-size: 0.65rem; background: var(--accent); color: #071a1e; padding: 0.15rem 0.42rem; border-radius: 2px; font-weight: 700; }
    .rcnt.zero { background: transparent; color: var(--muted); border: 1px solid var(--border); font-weight: 400; }
    .rsnips { padding: 0.6rem 0.85rem; display: flex; flex-direction: column; gap: 0.4rem; }
    .snip { font-size: 0.7rem; color: #7ab8bf; line-height: 1.6; border-left: 2px solid var(--border); padding-left: 0.65rem; }
    .snip mark { background: var(--accent); color: #071a1e; padding: 0 0.1rem; border-radius: 1px; }
    .snip-pg { font-size: 0.55rem; color: var(--muted); margin-bottom: 0.15rem; text-transform: uppercase; letter-spacing: 0.05em; }

    .empty { text-align: center; padding: 2rem; color: var(--muted); font-size: 0.75rem; line-height: 1.9; }
    .empty .big { font-size: 1.6rem; margin-bottom: 0.6rem; }
    .spin { display: inline-block; width: 8px; height: 8px; border: 2px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin .5s linear infinite; vertical-align: middle; }
    @keyframes spin { to { transform: rotate(360deg); } }

    footer { border-top: 1px solid var(--border); padding: 0.55rem 2rem; font-size: 0.58rem; color: #2a6570; }

    @media (max-width: 700px) {
      main { grid-template-columns: 1fr; }
      .left { border-right: none; border-bottom: 1px solid var(--border); }
    }
  </style>
</head>
<body>

<header>
  <div class="logo">Doc<span>Scan</span></div>
  <div class="tagline">Recherche instantanÃ©e dans vos documents</div>
  <div class="badge">âœ“ 100% local â€” rien enregistrÃ©</div>
</header>

<main>
  <div class="search-row">
    <div class="search-wrap">
      <input id="q" type="text" placeholder="Rechercher un mot, une date, un code..." autocomplete="off" spellcheck="false" />
    </div>
    <div id="stats">â€” aucun document</div>
  </div>

  <div class="left">
    <div id="drop">
      <input type="file" id="finput" multiple accept=".pdf,.png,.jpg,.jpeg,.gif,.webp,.bmp,.tif,.tiff,.txt,.csv,.md,.html" />
      <div class="icon">ğŸ“‚</div>
      <div class="lbl"><strong>Glissez vos fichiers ici</strong><br>ou cliquez pour sÃ©lectionner</div>
      <div class="fmt">PDF Â· JPG Â· PNG Â· GIF Â· WEBP Â· TXT Â· CSV Â· MD</div>
    </div>
    <div class="sec-title">Documents chargÃ©s</div>
    <div id="filelist"><div class="empty" style="padding:.6rem;font-size:.7rem;">Aucun document.</div></div>
  </div>

  <div class="right">
    <div class="sec-title">RÃ©sultats</div>
    <div id="results">
      <div class="empty"><div class="big">ğŸ”</div>Glissez des documents<br>puis tapez votre recherche.</div>
    </div>
  </div>
</main>

<footer>DocScan Â· traitement 100% local Â· PDF.js + Tesseract.js Â· fermez l'onglet pour tout effacer</footer>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
  'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

// â”€â”€ Tesseract worker (singleton) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let tWorker = null;
async function getOCRWorker() {
  if (tWorker) return tWorker;
  tWorker = await Tesseract.createWorker(['fra', 'eng'], 1, {
    langPath: 'https://tessdata.projectnaptha.com/4.0.0_fast',
    cacheMethod: 'none',
    logger: m => {
      if (typeof m.progress === 'number') {
        setProgress(activeId, Math.round(m.progress * 100), m.status || 'OCRâ€¦');
      }
    }
  });
  return tWorker;
}

// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const docs = {};
let uid = 0, activeId = null, searchTmo = null;

// â”€â”€ Drag & drop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const drop   = document.getElementById('drop');
const finput = document.getElementById('finput');
drop.addEventListener('dragover',  e => { e.preventDefault(); drop.classList.add('over'); });
drop.addEventListener('dragleave', () => drop.classList.remove('over'));
drop.addEventListener('drop', e => { e.preventDefault(); drop.classList.remove('over'); load(Array.from(e.dataTransfer.files)); });
finput.addEventListener('change', () => { load(Array.from(finput.files)); finput.value = ''; });

// â”€â”€ Load files â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function load(files) {
  for (const f of files) {
    const id  = ++uid;
    const ext = f.name.split('.').pop().toLowerCase();
    docs[id]  = { id, name: f.name, ext, text: '', pages: [], status: 'loading', prog: 0, progLbl: 'â€¦' };
    renderList();
    try {
      if (ext === 'pdf')                                    await loadPDF(id, f);
      else if (['txt','csv','md','html','htm'].includes(ext)) await loadText(id, f);
      else                                                   await loadImage(id, f);
      docs[id].status = 'ready';
    } catch (e) {
      docs[id].status = 'error';
      console.error(f.name, e);
    }
    renderList();
    search();
  }
}

// â”€â”€ PDF â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadPDF(id, file) {
  setProgress(id, 5, 'chargementâ€¦');
  const buf  = await file.arrayBuffer();
  const pdf  = await pdfjsLib.getDocument({ data: buf }).promise;
  const pages = [];
  let full = '';
  for (let p = 1; p <= pdf.numPages; p++) {
    setProgress(id, 5 + Math.round(p / pdf.numPages * 50), `page ${p}/${pdf.numPages}`);
    const pg  = await pdf.getPage(p);
    const txt = (await pg.getTextContent()).items.map(i => i.str).join(' ').trim();
    pages.push({ page: p, text: txt });
    full += ' ' + txt;
  }
  full = full.replace(/\s+/g, ' ').trim();

  // PDF with real text
  if (full.length > 60) {
    docs[id].pages = pages; docs[id].text = full; return;
  }

  // Scanned PDF â†’ OCR each page
  const ocrPages = [];
  for (let p = 1; p <= Math.min(pdf.numPages, 15); p++) {
    setProgress(id, 55 + Math.round(p / pdf.numPages * 45), `OCR p.${p}`);
    const pg  = await pdf.getPage(p);
    const vp  = pg.getViewport({ scale: 2.0 });
    const cvs = Object.assign(document.createElement('canvas'), { width: vp.width, height: vp.height });
    await pg.render({ canvasContext: cvs.getContext('2d'), viewport: vp }).promise;
    ocrPages.push({ page: p, text: await ocr(id, cvs) });
  }
  docs[id].pages = ocrPages;
  docs[id].text  = ocrPages.map(p => p.text).join(' ');
}

// â”€â”€ Image (JPG PNG WEBP GIF BMP TIFF) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadImage(id, file) {
  setProgress(id, 10, 'dÃ©codage imageâ€¦');

  // createImageBitmap handles ALL formats including animated GIF (takes first frame)
  let bitmap;
  try {
    bitmap = await createImageBitmap(file);
  } catch (e) {
    // Fallback: load via <img> tag
    bitmap = await new Promise((res, rej) => {
      const img = new Image();
      img.onload = () => res(img);
      img.onerror = rej;
      img.src = URL.createObjectURL(file);
    });
  }

  // Draw onto canvas, scaling up small images for better OCR
  const MAX = 1600;
  const scale = Math.min(MAX / Math.max(bitmap.width || bitmap.naturalWidth, 1), 4);
  const w = Math.round((bitmap.width || bitmap.naturalWidth) * scale);
  const h = Math.round((bitmap.height || bitmap.naturalHeight) * scale);
  const cvs = Object.assign(document.createElement('canvas'), { width: w, height: h });
  const ctx = cvs.getContext('2d');
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = 'high';
  ctx.drawImage(bitmap, 0, 0, w, h);

  setProgress(id, 30, 'OCRâ€¦');
  const text = await ocr(id, cvs);
  docs[id].pages = [{ page: 1, text }];
  docs[id].text  = text;
}

// â”€â”€ Text â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadText(id, file) {
  const text = await file.text();
  docs[id].pages = [{ page: 1, text }]; docs[id].text = text;
}

// â”€â”€ OCR via Tesseract â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function ocr(id, canvas) {
  activeId = id;
  const w = await getOCRWorker();
  const r = await w.recognize(canvas);
  activeId = null;
  return r.data.text || '';
}

// â”€â”€ Progress helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setProgress(id, pct, lbl) {
  if (!docs[id]) return;
  docs[id].prog = pct; docs[id].progLbl = lbl;
  const fill = document.querySelector(`[data-id="${id}"] .fprog-fill`);
  const lble = document.querySelector(`[data-id="${id}"] .fprog-lbl`);
  const ste  = document.querySelector(`[data-id="${id}"] .fst`);
  if (fill) fill.style.width = pct + '%';
  if (lble) lble.textContent = lbl;
  if (ste && docs[id].status === 'loading') ste.textContent = lbl;
}

// â”€â”€ Render file list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderList() {
  const ids = Object.keys(docs);
  const ready = ids.filter(i => docs[i].status === 'ready').length;
  document.getElementById('stats').innerHTML =
    ids.length ? `<b>${ready}</b> / ${ids.length} doc${ids.length > 1 ? 's' : ''} indexÃ©${ready > 1 ? 's' : ''}` : 'â€” aucun document';

  document.getElementById('filelist').innerHTML = ids.length ? ids.map(id => {
    const d = docs[id];
    const icon = d.status === 'loading' ? '<span class="spin"></span>' : d.status === 'ready' ? 'âœ“' : 'âœ—';
    const lbl  = d.status === 'loading' ? d.progLbl : d.status === 'ready' ? 'prÃªt' : 'erreur';
    const prog = d.status === 'loading' ? `<div class="fprog" data-id="${id}"><div class="fprog-bar"><div class="fprog-fill" style="width:${d.prog}%"></div></div><div class="fprog-lbl">${d.progLbl}</div></div>` : '';
    return `<div class="fitem ${d.status}" data-id="${id}">
      <span class="fext">${d.ext}</span>
      <span class="fname" title="${d.name}">${d.name}</span>
      <span class="fst ${d.status}">${icon} ${lbl}</span>
      <button class="fdel" onclick="del(${id})">âœ•</button>
    </div>${prog}`;
  }).join('') : '<div class="empty" style="padding:.6rem;font-size:.7rem;">Aucun document.</div>';
}

function del(id) { delete docs[id]; renderList(); search(); }

// â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('q').addEventListener('input', () => { clearTimeout(searchTmo); searchTmo = setTimeout(search, 80); });

function search() {
  const q    = document.getElementById('q').value.trim();
  const res  = document.getElementById('results');
  const ids  = Object.keys(docs).filter(i => docs[i].status === 'ready');

  if (!Object.keys(docs).length) { res.innerHTML = '<div class="empty"><div class="big">ğŸ”</div>Glissez des documents<br>puis tapez votre recherche.</div>'; return; }
  if (!q) { res.innerHTML = '<div class="empty"><div class="big">âœï¸</div>Tapez un mot ou une expression.</div>'; return; }

  const re    = new RegExp(esc(q), 'gi');
  const cards = ids.map(id => {
    const d = docs[id];
    const n = (d.text.match(re) || []).length;
    return { d, n, snips: snippets(d, q) };
  }).sort((a, b) => b.n - a.n);

  const total = cards.reduce((s, c) => s + c.n, 0);
  const nhits = cards.filter(c => c.n > 0).length;
  document.getElementById('stats').innerHTML =
    `<b>${total}</b> occurrence${total > 1 ? 's' : ''} dans <b>${nhits}</b> doc${nhits > 1 ? 's' : ''} Â· ${ids.length} indexÃ©${ids.length > 1 ? 's' : ''}`;

  res.innerHTML = cards.map(({ d, n, snips }) => {
    const cnt = n > 0
      ? `<span class="rcnt">${n} rÃ©sultat${n > 1 ? 's' : ''}</span>`
      : `<span class="rcnt zero">absent</span>`;
    const sh = snips.map(s => `<div class="snip"><div class="snip-pg">${s.lbl}</div>${s.html}</div>`).join('');
    return `<div class="rcard ${n > 0 ? 'hit' : ''}">
      <div class="rhead"><span class="fext">${d.ext}</span><span class="rname">${d.name}</span>${cnt}</div>
      ${sh ? `<div class="rsnips">${sh}</div>` : ''}
    </div>`;
  }).join('');
}

function snippets(doc, q) {
  const re = new RegExp(esc(q), 'gi');
  const out = [];
  for (const pg of doc.pages) {
    let m; re.lastIndex = 0;
    while ((m = re.exec(pg.text)) !== null && out.length < 3) {
      const s = Math.max(0, m.index - 80), e = Math.min(pg.text.length, m.index + q.length + 80);
      let ex = pg.text.slice(s, e).replace(/\s+/g, ' ').trim();
      if (s > 0) ex = 'â€¦' + ex;
      if (e < pg.text.length) ex += 'â€¦';
      const html = ex.replace(new RegExp(esc(q), 'gi'), x => `<mark>${x}</mark>`);
      out.push({ lbl: doc.pages.length > 1 ? `page ${pg.page}` : 'extrait', html });
    }
  }
  return out;
}

function esc(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
</script>
</body>
</html>
